<?php
use yii\helpers\Html;
use yii\grid\GridView;
use common\customer\RetsNewsletter;

$t = function($message, $params=[]){
    return \WS::t('rets-nl', $message, $params);
};
  
$this->title = $t('Newsletter Notification');  
$this->params['breadcrumbs'][] = $this->title;  
?>

<h2 class="title"><?php echo $this->title?>
    <a href="edit/" class="btn" style="float:right"><?php echo $t('New')?></a>
</h2>

<?php
$typeOptions = RetsNewsletter::typeOptions();
echo yii\grid\GridView::widget([
    'id'=>'uc-newsletter-grid',
    'layout'=>"{pager}\n{items}\n{pager}",
    'tableOptions'=>['class'=>'table'],
    'dataProvider' => $dataProvider,
    'columns'=>[
        'prop_type'=>[
            'attribute'=>'prop_type',
            'value'=>function($m) use($typeOptions){
                return isset($typeOptions[$m->prop_type]) ? $typeOptions[$m->prop_type] : null;
            },
            'headerOptions'=>[
                'width'=>'80px'
            ]
        ],
        'name'=>[
            'attribute'=>'name',
            'headerOptions'=>[
                'width'=>'120px'
            ]
        ],
        'info'=>[
            'header'=>\WS::t('rets-nl', 'Info'),
            'value'=>function($m) {
                $dataItems = $m->getDataItems();
                $output = [];
                foreach ($dataItems as $label => $value) {
                    $output[] = "<span class=\"label label-default\"><i>{$label}</i>:{$value}</span>";
                }
                return implode('&nbsp;', $output);
            },
            'format'=>'html'
        ],
        'created_at'=>[
            'attribute'=>'created_at',
            'format'=>'date',
            'headerOptions'=>[
                'width'=>'120px'
            ]
        ],
        [
           'class' => '\yii\grid\ActionColumn',
           'header' => \WS::t('rets-nl', 'Action'), 
           'template' => '{update}{delete}',
           'headerOptions' => ['width' => '20'],
           'contentOptions'=>[
                'align'=>'center'
           ]
        ],
    ]
]);